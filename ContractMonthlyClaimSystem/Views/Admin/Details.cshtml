@model ContractMonthlyClaimSystem.Models.ViewModels.ClaimDetailViewModel
@{
    Layout = "_Layout";
}
<a class="btn btn-link" asp-action="Index">« Back to Dashboard</a>
<h4>Review Claim</h4>
<div class="row mt-3">
    <div class="col-md-7">
        <div class="card mb-3">
            <div class="card-header">Claim Information</div>
            <div class="card-body">
                <p><strong>Lecturer:</strong> @Model.LecturerName</p>
                <p><strong>Date:</strong> @Model.SubmissionDate.ToString("yyyy-MM-dd")</p>
                <p><strong>Status:</strong> @await Html.PartialAsync("_StatusBadge", Model.Status)</p>
                <p><strong>Hours:</strong> @Model.HoursWorked</p>
                <p><strong>Rate:</strong> @Model.HourlyRate</p>
                <p><strong>Total:</strong> @Model.Total</p>
                <p><strong>Notes:</strong> @Model.Notes</p>
                <div class="mt-3">
                    <h6>Documents</h6>
                    @if (Model.Documents.Count == 0)
                    {
                        <p class="text-muted">No documents uploaded.</p>
                    }
                    else
                    {
                        <ul class="list-group">
                            @foreach (var d in Model.Documents)
                            {
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    @d.FileName
                                    <a class="btn btn-sm btn-outline-secondary" href="@Url.Content(d.FilePath.Replace("\\", "/").Replace("wwwroot/", "~/"))" target="_blank">Download</a>
                                </li>
                            }
                            }
                        </ul>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <div class="card">
            <div class="card-header">Review Decision</div>
            <div class="card-body">
                <form asp-action="Approve" method="post">
                    <input type="hidden" name="ClaimId" value="@Model.ClaimId" />
                    <div class="mb-2">
                        <label class="form-label">Comment (Optional)</label>
                        <textarea name="Comment" class="form-control" maxlength="300"></textarea>
                    </div>
                    <button class="btn btn-success" type="submit">Approve</button>
                </form>
                <form asp-action="Reject" method="post" class="mt-2">
                    <input type="hidden" name="ClaimId" value="@Model.ClaimId" />
                    <div class="mb-2">
                        <label class="form-label">Comment (Optional)</label>
                        <textarea name="Comment" class="form-control" maxlength="300"></textarea>
                    </div>
                    <button class="btn btn-danger" type="submit">Reject</button>
                </form>
            </div>
        </div>
    </div>
</div>
